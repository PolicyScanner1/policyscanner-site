<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PolicyScanner | Smarter Home Insurance Comparison</title>
  <style>
    body {
      font-family: "Inter", system-ui, sans-serif;
      margin: 0;
      background: #f8fafc;
      color: #0f172a;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 3rem;
      background: #ffffffcc;
      backdrop-filter: blur(12px);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      font-size: 1.5rem;
      color: #2563eb;
      font-weight: 700;
    }

    nav a {
      margin-left: 1.5rem;
      text-decoration: none;
      color: #334155;
      font-weight: 500;
      transition: color 0.2s;
    }

    nav a:hover { color: #1d4ed8; }

    .hero {
      text-align: center;
      padding: 6rem 2rem 4rem;
      background: linear-gradient(to bottom right, #2563eb, #1e3a8a);
      color: white;
    }

    .hero h2 { font-size: 2.7rem; margin-bottom: 1rem; }
    .hero p {
      font-size: 1.1rem;
      color: #e0e7ff;
      max-width: 620px;
      margin: 0 auto 2rem;
    }

    .hero button {
      background: #fff;
      color: #1e3a8a;
      padding: 0.9rem 1.7rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    .hero button:hover { background: #e2e8f0; }

    .demo-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: -3rem;
      padding: 3rem 1rem 5rem;
    }

    .upload-card {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      padding: 2rem 2rem 3rem;
      width: 95%;
      max-width: 800px;
      text-align: center;
    }

    .upload-card h3 { margin-bottom: 1rem; color: #1e40af; }
    .custom-file-upload {
      background: #2563eb;
      color: white;
      padding: 0.8rem 1.6rem;
      border-radius: 8px;
      cursor: pointer;
      display: inline-block;
      font-weight: 600;
      transition: background 0.2s ease;
      margin-bottom: 1rem;
    }
    .custom-file-upload:hover {
      background: #1d4ed8;
    }
    input[type="file"] {
      display: none;
    }

    button.upload {
      background: #1e3a8a;
      color: #fff;
      border: none;
      padding: 0.8rem 1.7rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background 0.2s ease;
      margin-top: 0.5rem;
    }

    button.upload:hover { background: #172554; }

    #result {
      text-align: left;
      background: #f1f5f9;
      border-radius: 12px;
      padding: 1.5rem;
      margin-top: 2rem;
      max-height: 500px;
      overflow-y: auto;
      font-family: monospace;
      white-space: pre-wrap;
      word-break: break-word;
    }

    footer {
      text-align: center;
      padding: 2rem;
      background: #1e293b;
      color: #cbd5e1;
    }
  </style>
</head>

<body>
  <header>
    <h1>PolicyScanner</h1>
    <nav>
      <a href="#demo">Compare</a>
      <a href="mailto:hello@policyscanner.co.uk">Contact</a>
    </nav>
  </header>

  <section class="hero">
    <h2>Smarter Home Insurance Comparison</h2>
    <p>Upload your policy to see how your cover, excesses, and premiums compare with the market — all powered by AI.</p>
    <button onclick="document.getElementById('fileInput').scrollIntoView({ behavior: 'smooth' })">Try It Now ↓</button>
  </section>

  <section class="demo-section" id="demo">
    <div class="upload-card">
      <h3>Upload Your Renewal or Policy Document</h3>
      <p style="color:#475569;">We'll analyse your cover and display it in an easy-to-read breakdown.</p>

      <label for="fileInput" class="custom-file-upload">📄 Choose File</label>
      <input type="file" id="fileInput" accept=".pdf,.jpg,.jpeg,.png" />
      <br />
      <button class="upload" onclick="uploadFile()">Upload & Compare</button>

      <div id="result"></div>
    </div>
  </section>

  <footer>
    © 2025 PolicyScanner — Building trust through transparency in insurance.
  </footer>

  <script>
    async function uploadFile() {
      const fileInput = document.getElementById("fileInput");
      const resultDiv = document.getElementById("result");
      const file = fileInput.files[0];
      if (!file) return alert("Please select a file first.");

      resultDiv.innerHTML = "<em>Analysing your document...</em> ⏳";

      const formData = new FormData();
      formData.append("file", file);

      try {
        const response = await fetch("https://policyscanner-backend.onrender.com/upload", {
          method: "POST",
          body: formData,
        });

        const data = await response.json();

        // Create formatted display
        const display = `
📋 **Policyholder:** ${data.policyholder_name || "N/A"}
🏢 **Insurer:** ${data.insurer_name || "N/A"}
📄 **Policy Number:** ${data.policy_number || "N/A"}
📅 **Start Date:** ${data.start_date || "N/A"}
📅 **End Date:** ${data.end_date || "N/A"}
💷 **Renewal Premium:** £${data.renewal_premium || "N/A"}

🏠 **Property Details**
  Address: ${data.address || "N/A"}
  Postcode: ${data.postcode || "N/A"}
  Type: ${data.property_type || "N/A"}
  Bedrooms: ${data.bedrooms || "N/A"}
  Bathrooms: ${data.bathrooms || "N/A"}
  Year Built: ${data.year_built || "N/A"}
  Construction: ${data.construction_type || "N/A"}
  Roof: ${data.roof_type || "N/A"}
  Flat Roof: ${data.flat_roof_percentage || "N/A"}%
  Listed Status: ${data.listed_status || "N/A"}

🧾 **Covers**
  Buildings Sum Insured: £${data.buildings_sum_insured || "N/A"}
  Contents Sum Insured: £${data.contents_sum_insured || "N/A"}
  Accidental Damage: ${data.accidental_damage_cover || "N/A"}
  Legal Expenses: ${data.legal_expenses_cover || "N/A"}
  Personal Possessions: ${data.personal_possessions_cover || "N/A"}
  Home Emergency: ${data.home_emergency_cover || "N/A"}

💰 **Excesses**
  Standard: £${data.excess_standard || "N/A"}
  Voluntary: £${data.excess_voluntary || "N/A"}

⚙️ **Specified Items**
  ${(data.specified_items || [])
    .map((i) => `- ${i.item} (£${i.value})`)
    .join("\n") || "None"}

🧯 **Security Features**
  ${(data.security_features || []).join(", ") || "N/A"}

📉 **Previous Claims**
  ${(data.previous_claims || [])
    .map((c) => `${c.type} (£${c.amount}) - ${c.date}`)
    .join("\n") || "None"}

📜 **Endorsements**
  ${(data.endorsements || []).join("\n") || "None"}

🚫 **Exclusions**
  ${(data.exclusions || []).join("\n") || "None"}
`;

        resultDiv.textContent = display.trim();
      } catch (err) {
        resultDiv.innerHTML = "<span style='color:red'>Error: " + err.message + "</span>";
      }
    }
  </script>
</body>
</html>

